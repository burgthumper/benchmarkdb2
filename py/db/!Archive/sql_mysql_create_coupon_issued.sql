CREATE TABLE `coupon_issued` (
  `id` int NOT NULL,
  `serial` bigint NOT NULL,
  `secret` varchar(32) NOT NULL,
  `is_burnable` tinyint NOT NULL DEFAULT '0',
  `expiration` datetime DEFAULT NULL,
  `incipience` datetime DEFAULT NULL,
  `overall_use_count` int NOT NULL DEFAULT '0',
  `period_use_count` int NOT NULL DEFAULT '0',
  `last_use_timestamp` datetime DEFAULT NULL,
  `last_action` varchar(20) DEFAULT NULL,
  `tracked_use_count` int NOT NULL DEFAULT '0',
  `last_tracked_timestamp` datetime DEFAULT NULL,
  `tracked_active_until` datetime DEFAULT NULL,
  `available_redemptions` int DEFAULT '0',
  `last_redemption_earned` datetime DEFAULT NULL,
  `last_number_of_redemptions_applied` int DEFAULT '0',
  `number_of_redemptions_earned_in_time_period` int DEFAULT '0',
  `last_apply_amount` decimal(9,2) DEFAULT NULL,
  `registration_timestamp` datetime DEFAULT NULL,
  `user_reference_id` varchar(100) DEFAULT NULL,
  `is_deactivated` tinyint DEFAULT '0',
  `has_received_registration_reward` tinyint DEFAULT '0',
  `campaign_id` int DEFAULT NULL,
  `coupon_short_id` varchar(25) DEFAULT NULL,
  `coupon_barcode` varchar(100) DEFAULT NULL,
  `first_transaction_timestamp` datetime DEFAULT NULL,
  PRIMARY KEY (`id`,`serial`),
  UNIQUE KEY `short_id_INDEX` (`coupon_short_id`),
  KEY `user_reference_id_INDEX` (`user_reference_id`),
  KEY `barcode_INDEX` (`coupon_barcode`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
